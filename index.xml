<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:slash="http://purl.org/rss/1.0/modules/slash/"><channel><title>have a Ninthday</title><atom:link href="%7balternate%20%7brss%20application/rss+xml%20%20index%20alternate%20%20false%20false%20true%20false%20false%200%7d%20/index.xml%20https://blog.ninthday.me/index.xml%7d" rel="self" type="application/rss+xml"/><link>https://blog.ninthday.me/</link><managingEditor>Ninthday</managingEditor><description>A simple, performance-first, SEO-friendly Hugo theme</description><lastBuildDate>Thu, 03 Aug 2023 22:17:36 +0800</lastBuildDate><language>zh-tw</language><generator>Hugo -- gohugo.io</generator><item><title>Host a Website on Google Cloud Storage</title><link>https://blog.ninthday.me/2023/08/host-website-on-gcs/</link><pubDate>Thu, 03 Aug 2023 22:17:36 +0800</pubDate><guid>https://blog.ninthday.me/2023/08/host-website-on-gcs/</guid><description>&lt;p>在開始閱讀內文前，假設我們已經在 Google Cloud platform 完成建立可以使用的 Project。&lt;/p>
&lt;h2 class="group " id="設定-google-search-console"
>設定 Google Search Console&lt;a href="#%e8%a8%ad%e5%ae%9a-google-search-console"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>首先，Google 會先確認我們對要設定的網域，具備擁有或是管理權限。如果是在 Google Domains 購買的網域名稱，Google 會自動完成驗證。如果是在其他網域代理商購買，就會需要至 &lt;a
class="link"
href="https://search.google.com/search-console/"target="_blank" rel="noopener">Google Search Console&lt;/a
>
進行網域的驗證。&lt;/p>
&lt;p>
&lt;/p>
&lt;p>如果擁有網域，可以直接選擇左邊的網域，這個部分會需要對 DNS 進行驗證。跟着步驟進行，我剛好是透過 Gandi.net 購買網域，在這裡就可以直接點選下面的開始驗證程序。&lt;/p>
&lt;p>
&lt;/p>
&lt;p>驗證程序將會導引至 Gandi 網站，輸入 Gandi 的帳號密碼後，就會自動進行網域擁有選的驗證，完成驗證後就可以獲得驗證成功的畫面。&lt;/p>
&lt;p>
&lt;/p>
&lt;p>參考內容：
&lt;a
class="link"
href="https://cloud.google.com/storage/docs/domain-name-verification#verification"target="_blank" rel="noopener">Domain-named bucket verification  |  Cloud Storage  |  Google Cloud&lt;/a
>
&lt;/p>
&lt;h2 class="group " id="建立-cname-record-對應"
>建立 CNAME record 對應&lt;a href="#%e5%bb%ba%e7%ab%8b-cname-record-%e5%b0%8d%e6%87%89"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>在網路上，網址都是代表一個位置，DNS 會解析網址成為我們要去的目標。由於 GCS（Google Cloud Storage） 的位址為 Google 所擁有，要使用我們自己定義的網址來當作 GCS 的位址，我們需要在 DNS 建立一個別名指向 GCS。&lt;/p>
&lt;p>以 &lt;code>test.agriweather.cloud&lt;/code> 作為例子：&lt;/p>
&lt;ul>
&lt;li>類型：&lt;strong>CNAME&lt;/strong>&lt;/li>
&lt;li>名稱：&lt;strong>test.agriweather.cloud&lt;/strong>&lt;/li>
&lt;li>主機名稱：&lt;strong>c.storage.googleapis.com.&lt;/strong>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Note:
主機名稱最後要加上一個點，才不會加上自己的網域名稱變成 &lt;code>c.storage.googleapis.com.agriweather.cloud&lt;/code>。&lt;/p>
&lt;/blockquote>
&lt;p>
&lt;/p>
&lt;h2 class="group " id="建立-cloud-storage-bucket"
>建立 Cloud Storage Bucket&lt;a href="#%e5%bb%ba%e7%ab%8b-cloud-storage-bucket"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>在這個步驟中，我們要建立一個 Bucket 來放置網頁的內容。由 Google Cloud Console 中找到 &lt;strong>Cloud Storage&lt;/strong> 項目，點擊上方 &lt;strong>CREATE&lt;/strong> 來建立一個新的 Bucket。&lt;/p>
&lt;p>完成建立的幾個步驟內容&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Name your bucket&lt;/strong>：這個 Bucket 的名稱，請使用前述步驟中，預計要使用的 domain name 來命名，如 test.agriweather.cloud。&lt;/li>
&lt;li>&lt;strong>Choose where to store your data&lt;/strong>：選擇存放的地方，有 &lt;code>Multi-region&lt;/code>、&lt;code>Dual-region&lt;/code>、&lt;code>Region&lt;/code>，存放在越多位置有可能離你的使用者越近，但是價格也會比較高。&lt;/li>
&lt;li>&lt;strong>Choose a storage class for your data&lt;/strong>：選擇 Storage 的類別，選擇 &lt;strong>Standard&lt;/strong>。&lt;/li>
&lt;li>&lt;strong>Choose how to control access to objects&lt;/strong>：控制訪問的權限，把預設 Enforce public access prevention on this bucket 的勾選移除，Access control 部分我選擇 &lt;strong>Uniform&lt;/strong> 整個資料夾都統一權限。&lt;/li>
&lt;li>&lt;strong>Choose how to protect object data&lt;/strong>：最後這個項目使用預設設定 None。&lt;/li>
&lt;/ol>
&lt;h2 class="group " id="設定-public-權限"
>設定 Public 權限&lt;a href="#%e8%a8%ad%e5%ae%9a-public-%e6%ac%8a%e9%99%90"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>使用 GCS 來作為靜態網站的位置，要讓所有人都可以訪問 Bucket 中的內容，預設是無法存取內容，所以我們要設定 Bucket-level 的訪問權限至 Public access。&lt;/p>
&lt;ol>
&lt;li>點選至上個步驟建立的 Bucket（使用 Domain Name 作為名稱的 Bucket），進到 Bucket detail 的畫面。&lt;/li>
&lt;li>選擇 &lt;strong>Permissions&lt;/strong> 標籤。
&lt;/li>
&lt;li>點擊 GRANT ACCESS 按鈕，在 New principals 中輸入 &lt;strong>allUsers&lt;/strong>，並在 Role 角色的部分找到 &lt;strong>Cloud Storage&lt;/strong> &amp;gt; &lt;strong>Storage Object Viewer&lt;/strong>
&lt;/li>
&lt;li>完成設定後，&lt;strong>Permissions&lt;/strong> 標籤頁面中就會出現如下的畫面
&lt;/li>
&lt;/ol>
&lt;h2 class="group " id="編輯-website-configration"
>編輯 WebSite Configration&lt;a href="#%e7%b7%a8%e8%bc%af-website-configration"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>進入最後一個步驟，設定進入的索引頁（index Page）和自定義的錯誤資訊頁（Error Page）。索引頁是由 &lt;code>MainPageSuffix&lt;/code> 屬性控制，錯誤頁則是由 &lt;code>NotFoundPage&lt;/code> 屬性控制。&lt;/p>
&lt;p>設定 WebSite Configration 屬性的方法，在 Bucket 列表的最後面有三個點，點擊後的清單中有個 &lt;strong>Edit website configration&lt;/strong> 的項目。
&lt;/p>
&lt;p>這個項目會有個設定的對話視窗，已經預設在 Index (main) page suffix 填上 index.html， Error (404 not found) page 填上 404-Page.html。如果在網站上有對應的檔案則可以不用修改。
&lt;/p>
&lt;p>也可以使用 gsutil 指令的方式設定。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ gsutil web &lt;span style="color:#8be9fd;font-style:italic">set&lt;/span> -m index.html -e 404-Page.html gs://test.agriweather.cloud
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果使用 Vue.js 這類的前端框架，平時我們在 &lt;code>nginx&lt;/code> 的設定如下。
&lt;/p>
&lt;p>主要是當發生路徑不存在的時候，嘗試使用主目錄下的 index.html 做為程式的進入點，不會直接拋出 404 NotFound。同樣的意思，在 Cloud Storage Bucket 的 website configration 設定中，我們把 &lt;strong>Error (404 not found) page&lt;/strong> 的部分，也填上 index.html 索引頁，就能在當路徑不存在的時候，會導引至 index.html。&lt;/p>
&lt;h2 class="group " id="測試網站"
>測試網站&lt;a href="#%e6%b8%ac%e8%a9%a6%e7%b6%b2%e7%ab%99"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>現在我們可以打開瀏覽器，在網址列的地方輸入網址 &lt;code>test.agriweather.cloud&lt;/code>，來確認一下我們網頁的內容是不是都能正常顯示出來了。&lt;/p>
&lt;blockquote>
&lt;p>Note:
完成後，我們只能使用 &lt;code>http&lt;/code> 的方式連線。若要使用 &lt;code>https&lt;/code> 連線，我在另一篇文章中再來說明。&lt;/p>
&lt;/blockquote>
&lt;p>參考資料：&lt;/p>
&lt;ol>
&lt;li>&lt;a
class="link"
href="https://codelabs.developers.google.com/codelabs/cloud-webapp-hosting-gcs#1"target="_blank" rel="noopener">Host a Static Website in Google Cloud with Cloud Storage&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://medium.com/bb-tutorials-and-thoughts/how-to-host-a-vue-js-static-website-with-gcp-cloud-storage-b8e87b89e4de"target="_blank" rel="noopener">How To Host a Vue.js Static Website With GCP Cloud Storage | by Bhargav Bachina | Bachina Labs | Medium&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://cloud.google.com/storage/docs/static-website#examples"target="_blank" rel="noopener">Static website examples and tips  |  Cloud Storage  |  Google Cloud&lt;/a
>
&lt;/li>
&lt;/ol></description></item><item><title>Install Openvas on Google Cloud</title><link>https://blog.ninthday.me/2023/05/install-openvas-gcp/</link><pubDate>Tue, 23 May 2023 09:20:24 +0800</pubDate><guid>https://blog.ninthday.me/2023/05/install-openvas-gcp/</guid><description>&lt;p>以手動方式安裝 OpenVAS 是一個步驟非常多且繁雜的過程，可以參考這篇文章： &lt;a
class="link"
href="https://kifarunix.com/install-gvm-21-04-on-debian-11-debian-10/"target="_blank" rel="noopener">Install GVM 21.04 on Debian 11/Debian 10 - kifarunix.com&lt;/a
>
的內容。其中如果還有什麼錯誤，還需要花更多的時間來處理過程中出現的問題。因此手動從頭到尾的安裝就不是想使用的安裝方式。&lt;/p>
&lt;p>在網路上有很多安裝 OpenVAS 的教學，都是直接在 Kali Linux 上，可以無痛或少痛的安裝。然而在 GCP 上沒有 Google 官方的 Kali Linux image 可以直接使用，雖然在 Google Cloud MarketPlace 能夠查到直接 &lt;code>Launch&lt;/code> 使用，但是價格一個月需要 92.80 美金，對個人使用來說價格蠻高的。&lt;/p>
&lt;p>因此也有使用者是透過 VirtualBox 安裝後再上傳的方式（&lt;a
class="link"
href="https://github.com/infotechca/kali-on-gcp"target="_blank" rel="noopener">infotechca/kali-on-gcp: How to Upload or Install Kali Linux on Google Cloud&lt;/a
>
），來達到在 GCE 上用 Kali Linux。&lt;/p>
&lt;p>上述兩個方式，都是直接在 GCE 上安裝 Kali Linux，接着我們就可以在 Kali Linux 上使用 &lt;code>apt&lt;/code> 的方式安裝 OpenVAS。&lt;/p>
&lt;p>因我只有想使用 OpenVAS 並不需要其他 Kali 所安裝的工具，發現其實 Kali Linux 也是基於 Debian 的分支版本，網路上有些分享的方法&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>，是先在 GCP 安裝了 Debian 之後再改造為 Kali。如果是這樣，那就有可能利用類似的方式，將 Kali 加入 source list 中，利用 Kali 的來源使用 &lt;code>apt&lt;/code> 的方式安裝，達到比較簡易的安裝方式。&lt;/p>
&lt;h2 class="group " id="安裝-openvas"
>安裝 OpenVAS&lt;a href="#%e5%ae%89%e8%a3%9d-openvas"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;h3 class="group " id="step-1-加入-kali-source-及更新套件清單"
>Step 1. 加入 Kali Source 及更新套件清單&lt;a href="#step-1-%e5%8a%a0%e5%85%a5-kali-source-%e5%8f%8a%e6%9b%b4%e6%96%b0%e5%a5%97%e4%bb%b6%e6%b8%85%e5%96%ae"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>將 Kali Network repo 加入 &lt;code>/etc/apt/source.list&lt;/code>。&lt;/p>
&lt;p>Kali 有兩個主要的分支可以選擇：&lt;/p>
&lt;ul>
&lt;li>kali-rolling：預設分支，比較頻繁的更新&lt;/li>
&lt;li>kali-last-snapshot：可以安心使用的穩定版本&lt;/li>
&lt;/ul>
&lt;p>在這裡我選擇 kali-rolling 版本的分支，以下面的語法加入到 source.list 中&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> &lt;span style="color:#f1fa8c">&amp;#34;deb http://http.kali.org/kali kali-rolling main contrib non-free non-free-firmware&amp;#34;&lt;/span> | sudo tee /etc/apt/sources.list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>加入完成後，更新套件清單&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo apt update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>參考資料：
&lt;a
class="link"
href="https://www.kali.org/docs/general-use/kali-linux-sources-list-repositories/"target="_blank" rel="noopener">Kali Network Repositories (/etc/apt/sources.list) | Kali Linux Documentation&lt;/a
>
&lt;/p>
&lt;h3 class="group " id="step-2-加入金鑰"
>Step 2. 加入金鑰&lt;a href="#step-2-%e5%8a%a0%e5%85%a5%e9%87%91%e9%91%b0"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>在上個步驟 apt update 時，過程中會出現簽章無效的錯誤&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Get:1 http://wlglam.fsmg.org.nz/kali kali-rolling InRelease &lt;span style="color:#ff79c6">[&lt;/span>30.5 kB&lt;span style="color:#ff79c6">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Err:1 http://wlglam.fsmg.org.nz/kali kali-rolling InRelease
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>The following signatures were invalid: EXPKEYSIG ED444FF07D8D0BF6 Kali Linux Repository
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我們必須要加入金鑰才能更新 Kali 套件清單，加入的方法如下&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo gpg --keyserver keys.openpgp.org --recv-key ED444FF07D8D0BF6
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ gpg -a --export ED444FF07D8D0BF6 | sudo apt-key add -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Note:
部分網路上的教學的 keyserver 使用 &lt;code>pgpkeys.mit.edu&lt;/code>，目前已經失效查不到 &lt;code>ED444FF07D8D0BF6&lt;/code>
所以我改用 &lt;code>keys.openpgp.org&lt;/code> 作為 keyserver&lt;/p>
&lt;/blockquote>
&lt;h3 class="group " id="step3-安裝-openvas"
>Step3. 安裝 OpenVAS&lt;a href="#step3-%e5%ae%89%e8%a3%9d-openvas"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>完成 Kali Repo 加入 source.list 程序，進行套件更新，接下來只要一個語法就可以進行安裝&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo apt upgrade
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ sudo apt install openvas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 class="group " id="初始化及啓動程式"
>初始化及啓動程式&lt;a href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e5%8f%8a%e5%95%93%e5%8b%95%e7%a8%8b%e5%bc%8f"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;h3 class="group " id="初始化-gvm"
>初始化 GVM&lt;a href="#%e5%88%9d%e5%a7%8b%e5%8c%96-gvm"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>執行下面的指令開始初始化 GVM 的步驟，執行之後因為過程中會包含一些 feed 的更新，會花相當久的時間，會花上 1~2 小時的時間，可以泡個咖啡追個劇再回來。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo gvm-setup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>整個初始化的過程完成後，記得複製步驟最後生成的密碼，在我們第一次登入的時候會用上。&lt;/p>
&lt;p>
&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>[*] User created with password &amp;#39;ed66cea4-93ae-49b4-b79f-5b8b67a89b31&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="檢查-openvas-及啓動服務"
>檢查 OpenVAS 及啓動服務&lt;a href="#%e6%aa%a2%e6%9f%a5-openvas-%e5%8f%8a%e5%95%93%e5%8b%95%e6%9c%8d%e5%8b%99"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>完成安裝的步驟之後，接下來我們使用下列的語法，驗證安裝是否正常。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo gvm-check-setup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用下面指令，啓動 OpenVAS 服務。執行之後會 listen 在 &lt;code>9392&lt;/code> Port。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo gvm-start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 class="group " id="forward-proxy-server"
>Forward Proxy Server&lt;a href="#forward-proxy-server"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>如果是在本機上安裝，只要開啓瀏覽器並在網址列中輸入 &lt;code>http://localhost:9392&lt;/code> 就可以連結上 OpenVAS 的 Web GUI，看到登入畫面。由於我們是安裝在 Google Compute Engine 上，沒有辦法使用只允許本機的服務。這時候我們可以使用代理伺服器（Proxy Server）的方式，幫我們將外部的 Http Requeat 橋接至本機指定 Port 的服務上。&lt;/p>
&lt;h3 class="group " id="安裝-nginx"
>安裝 Nginx&lt;a href="#%e5%ae%89%e8%a3%9d-nginx"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>在 Debian 上安裝 Nginx Web Server 方法很簡單，直接通過官方的套件庫安裝即可。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo apt install nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="設定-nginx-proxy"
>設定 Nginx Proxy&lt;a href="#%e8%a8%ad%e5%ae%9a-nginx-proxy"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>修改 Nginx Web Server 設定&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo vim /etc/nginx/sites-available/default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 location 中加入 &lt;code>proxy_pass&lt;/code> 代理伺服器將封包轉向本機的 &lt;code>port 9392&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-conf" data-lang="conf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">server&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">...&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">略&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">location&lt;/span> / {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">proxy_pass&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">http&lt;/span>://&lt;span style="color:#bd93f9">127.0.0.1&lt;/span>:&lt;span style="color:#8be9fd;font-style:italic">9392&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">proxy_set_header&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">Host&lt;/span> $&lt;span style="color:#8be9fd">host&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重新 reload nginx 讀取設定的內容。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ sudo systemctl reload nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="設定-https"
>設定 https&lt;a href="#%e8%a8%ad%e5%ae%9a-https"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>完成 Nginx Proxy 轉送的設定後，在網址列輸入 http 位址就會出現 OpenVAS 的登入畫面。然而在輸入帳號密碼之後，系統阻擋了非 https 的登入方式，提示訊息顯示不是 https 登入你的資訊有可能會被攔截。&lt;/p>
&lt;p>這時候我們就可以利用 &lt;a
class="link"
href="https://certbot.eff.org/"target="_blank" rel="noopener">Certbot&lt;/a
>
來取得憑證及完成 Https 設定。細節在此就不再多做敘述，跟着 Certbot 的說明安裝即可，也是一個指令安裝，一個指令就可以設定完成。&lt;/p>
&lt;h2 class="group " id="平時維護"
>平時維護&lt;a href="#%e5%b9%b3%e6%99%82%e7%b6%ad%e8%ad%b7"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;h3 class="group " id="重設-admin-密碼"
>重設 admin 密碼&lt;a href="#%e9%87%8d%e8%a8%ad-admin-%e5%af%86%e7%a2%bc"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>如果忘記 admin 登入的帳號密碼，可以利用下面的指令重新設定密碼。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo gvmd --user&lt;span style="color:#ff79c6">=&lt;/span>admin --new-password&lt;span style="color:#ff79c6">=&lt;/span>passwd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="更新-feed"
>更新 Feed&lt;a href="#%e6%9b%b4%e6%96%b0-feed"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>下面的指令能夠更新 feed 的內容。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo gvm-feed-update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>參考資料：&lt;/p>
&lt;ol>
&lt;li>&lt;a
class="link"
href="https://kifarunix.com/install-gvm-21-04-on-debian-11-debian-10/"target="_blank" rel="noopener">Install GVM 21.04 on Debian 11/Debian 10 - kifarunix.com&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://www.youtube.com/watch?v=XRJMA67Beh4"target="_blank" rel="noopener">How to install and run Kali-Linux on Google Cloud - YouTube&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://github.com/m0ns7er/GCP"target="_blank" rel="noopener">m0ns7er/GCP: Kali linux on GCP&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://www.youtube.com/watch?v=LGh2SetiKaY"target="_blank" rel="noopener">Complete Beginner OpenVAS Vulnerability Scanning Tutorial - Cyber Security - YouTube&lt;/a
>
&lt;/li>
&lt;/ol>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a
class="link"
href="https://www.youtube.com/watch?v=XRJMA67Beh4"target="_blank" rel="noopener">How to install and run Kali-Linux on Google Cloud - YouTube&lt;/a
>
&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Openvas Community Container</title><link>https://blog.ninthday.me/2023/04/openvas-community-container/</link><pubDate>Sat, 22 Apr 2023 14:55:01 +0800</pubDate><guid>https://blog.ninthday.me/2023/04/openvas-community-container/</guid><description>&lt;p>OpenVAS（Open Vulnerability Assessment Scanner）是一款開源的弱點掃描檢測工具，目前是由 &lt;a
class="link"
href="https://www.greenbone.net/"target="_blank" rel="noopener">Greenbone&lt;/a
>
維護，能夠持續的更新 NVT，SCAP&amp;hellip;等弱點資料庫，對已知的漏洞及弱點進行掃描。OpenVAS 同時有 community 及 commercial 版本，community 使用的是 Greenbone Community Feed，沒有官方的技術性支援。&lt;/p>
&lt;p>依據前人的經驗，OpenVAS 安裝不容易，建議如果要本機安裝，可以使用 Kali Linux 這個發行版本，已經包含於 Kali 套件庫中。如果不是使用 Kali Linux，像我的開發環境是 Ubuntu，就可以使用 docker container 的方式來安裝。&lt;/p>
&lt;h2 class="group " id="軟硬體需求"
>軟硬體需求&lt;a href="#%e8%bb%9f%e7%a1%ac%e9%ab%94%e9%9c%80%e6%b1%82"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;h3 class="group " id="軟體版本"
>軟體版本&lt;a href="#%e8%bb%9f%e9%ab%94%e7%89%88%e6%9c%ac"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>Greenbone Community Documentation 官方的文件支援下面這幾個 Linux 發行版本的安裝：&lt;/p>
&lt;ul>
&lt;li>Debian stable &lt;a
class="link"
href="https://www.debian.org/releases/stable"target="_blank" rel="noopener">(bullseye)&lt;/a
>
&lt;/li>
&lt;li>Ubuntu 22.04 LTS&lt;/li>
&lt;li>Fedora 35 and 36&lt;/li>
&lt;li>CentOS 9 Stream&lt;/li>
&lt;/ul>
&lt;p>必須先安裝完 &lt;code>docker-ce&lt;/code> 及 &lt;code>docker compose&lt;/code>。&lt;/p>
&lt;h3 class="group " id="硬體需求"
>硬體需求&lt;a href="#%e7%a1%ac%e9%ab%94%e9%9c%80%e6%b1%82"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>官方對於 &lt;code>Greenbone Community Containers&lt;/code> 給出的執行需求建議。&lt;/p>
&lt;p>最小需求:&lt;/p>
&lt;ul>
&lt;li>CPU Cores: 2&lt;/li>
&lt;li>Random-Access Memory: 4GB&lt;/li>
&lt;li>Hard Disk: 20GB free&lt;/li>
&lt;/ul>
&lt;p>建議需求:&lt;/p>
&lt;ul>
&lt;li>CPU Cores: 4&lt;/li>
&lt;li>Random-Access Memory: 8GB&lt;/li>
&lt;li>Hard Disk: 60GB free&lt;/li>
&lt;/ul>
&lt;h2 class="group " id="使用-setup-and-start-script-安裝"
>使用 Setup and Start Script 安裝&lt;a href="#%e4%bd%bf%e7%94%a8-setup-and-start-script-%e5%ae%89%e8%a3%9d"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>官方 Greenbone Community Documentation &lt;a
class="link"
href="https://greenbone.github.io/docs/latest/22.4/container/index.html#setup-and-start-script"target="_blank" rel="noopener">頁面&lt;/a
>
上，很貼心的提供了 Setup and Start Script，讓使用者可以透過執行這個 &lt;code>setup-and-start-greenbone-community-edition.sh&lt;/code> 的方式，就能夠快速的安裝。&lt;/p>
&lt;p>一開始我選擇以 script 的方式進行安裝，但在下載執行後會出現如下的錯誤訊息。觀察了一下 shell script 中的內容，我認為很有可能是因為 &lt;code>docker compose&lt;/code> 的版本不同，我使用的是 docker compose v2，v2 已經被規劃為 docker CLI 的一部分，所以發生這些錯誤。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Pulling Greenbone Community Containers 22.4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ERROR: The Compose file &lt;span style="color:#f1fa8c">&amp;#39;.../GreenboneCommunityEdition/docker-compose-22.4.yml&amp;#39;&lt;/span> is invalid because:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Unsupported config option &lt;span style="color:#ff79c6">for&lt;/span> volumes: &lt;span style="color:#f1fa8c">&amp;#39;cert_data_vol&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Unsupported config option &lt;span style="color:#ff79c6">for&lt;/span> services: &lt;span style="color:#f1fa8c">&amp;#39;vulnerability-tests&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我電腦中的 &lt;code>docker&lt;/code> 及 &lt;code>docker compose&lt;/code> 版本為：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ docker --version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Docker version 23.0.3, build 3e7cbfd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ docker compose version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Docker Compose version v2.17.2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最後，沒有透過 &lt;code>setup-and-start-greenbone-community-edition.sh&lt;/code>，依照同頁文件前面的內容自行一個個步驟改變一下指令執行，還是可以順利完成安裝。&lt;/p>
&lt;h2 class="group " id="自行依照步驟安裝"
>自行依照步驟安裝&lt;a href="#%e8%87%aa%e8%a1%8c%e4%be%9d%e7%85%a7%e6%ad%a5%e9%a9%9f%e5%ae%89%e8%a3%9d"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;h3 class="group " id="1-下載-docker-compose-yaml-檔"
>1. 下載 docker-compose YAML 檔&lt;a href="#1-%e4%b8%8b%e8%bc%89-docker-compose-yaml-%e6%aa%94"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>在這&lt;a
class="link"
href="https://greenbone.github.io/docs/latest/22.4/container/index.html#"target="_blank" rel="noopener">官方說明的頁面&lt;/a
>
中主要使用 &lt;code>docker compose&lt;/code> 方式來安裝 &lt;strong>Greenbone Community Edition&lt;/strong> 的 containers。這個方式主要是透過一個 YAML 設定檔，依照檔案裡面設定的服務內容，來安裝所需要的 containers。&lt;/p>
&lt;p>可以直接使用下面語法，下載官方在 GitHub 準備好的 &lt;code>docker-compose.yml&lt;/code> 檔案。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ curl -f -L https://greenbone.github.io/docs/latest/_static/docker-compose-22.4.yml -o docker-compose.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或是複製下面 YAML 內容（版本為 22.4），存成 &lt;code>docker-compose.yml&lt;/code> 檔案。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">vulnerability-tests&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/vulnerability-tests
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">STORAGE_PATH&lt;/span>: /var/lib/openvas/22.04/vt-data/nasl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - vt_data_vol:/mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">notus-data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/notus-data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - notus_data_vol:/mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">scap-data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/scap-data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - scap_data_vol:/mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">cert-bund-data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/cert-bund-data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - cert_data_vol:/mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">dfn-cert-data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/dfn-cert-data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - cert_data_vol:/mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - cert-bund-data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">data-objects&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/data-objects
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - data_objects_vol:/mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">report-formats&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/report-formats
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - data_objects_vol:/mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - data-objects
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">gpg-data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/gpg-data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gpg_data_vol:/mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">redis-server&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/redis-server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">restart&lt;/span>: &lt;span style="color:#ff79c6">on&lt;/span>-failure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - redis_socket_vol:/run/redis/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">pg-gvm&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/pg-gvm:stable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">restart&lt;/span>: &lt;span style="color:#ff79c6">on&lt;/span>-failure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - psql_data_vol:/var/lib/postgresql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - psql_socket_vol:/var/run/postgresql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">gvmd&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/gvmd:stable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">restart&lt;/span>: &lt;span style="color:#ff79c6">on&lt;/span>-failure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gvmd_data_vol:/var/lib/gvm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - scap_data_vol:/var/lib/gvm/scap-data/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - cert_data_vol:/var/lib/gvm/cert-data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - data_objects_vol:/var/lib/gvm/data-objects/gvmd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - vt_data_vol:/var/lib/openvas/plugins
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - psql_data_vol:/var/lib/postgresql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gvmd_socket_vol:/run/gvmd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - ospd_openvas_socket_vol:/run/ospd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - psql_socket_vol:/var/run/postgresql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">pg-gvm&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">condition&lt;/span>: service_started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">scap-data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">condition&lt;/span>: service_completed_successfully
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">cert-bund-data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">condition&lt;/span>: service_completed_successfully
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">dfn-cert-data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">condition&lt;/span>: service_completed_successfully
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">data-objects&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">condition&lt;/span>: service_completed_successfully
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">report-formats&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">condition&lt;/span>: service_completed_successfully
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">gsa&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/gsa:stable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">restart&lt;/span>: &lt;span style="color:#ff79c6">on&lt;/span>-failure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#bd93f9">9392&lt;/span>:&lt;span style="color:#bd93f9">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gvmd_socket_vol:/run/gvmd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gvmd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">ospd-openvas&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/ospd-openvas:stable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">restart&lt;/span>: &lt;span style="color:#ff79c6">on&lt;/span>-failure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">init&lt;/span>: &lt;span style="color:#ff79c6">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">hostname&lt;/span>: ospd-openvas.local
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">cap_add&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - NET_ADMIN &lt;span style="color:#6272a4"># for capturing packages in promiscuous mode&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - NET_RAW &lt;span style="color:#6272a4"># for raw sockets e.g. used for the boreas alive detection&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">security_opt&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - seccomp=unconfined
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - apparmor=unconfined
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">command&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;ospd-openvas&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;-f&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;--config&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;/etc/gvm/ospd-openvas.conf&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;--mqtt-broker-address&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;mqtt-broker&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;--notus-feed-dir&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;/var/lib/notus/advisories&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;-m&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f1fa8c">&amp;#34;666&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gpg_data_vol:/etc/openvas/gnupg
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - vt_data_vol:/var/lib/openvas/plugins
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - notus_data_vol:/var/lib/notus
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - ospd_openvas_socket_vol:/run/ospd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - redis_socket_vol:/run/redis/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">redis-server&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">condition&lt;/span>: service_started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">gpg-data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">condition&lt;/span>: service_completed_successfully
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">vulnerability-tests&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">condition&lt;/span>: service_completed_successfully
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">mqtt-broker&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">restart&lt;/span>: &lt;span style="color:#ff79c6">on&lt;/span>-failure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/mqtt-broker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#bd93f9">1883&lt;/span>:&lt;span style="color:#bd93f9">1883&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">default&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">aliases&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - mqtt-broker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - broker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">notus-scanner&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">restart&lt;/span>: &lt;span style="color:#ff79c6">on&lt;/span>-failure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/notus-scanner:stable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - notus_data_vol:/var/lib/notus
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gpg_data_vol:/etc/openvas/gnupg
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">NOTUS_SCANNER_MQTT_BROKER_ADDRESS&lt;/span>: mqtt-broker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">NOTUS_SCANNER_PRODUCTS_DIRECTORY&lt;/span>: /var/lib/notus/products
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - mqtt-broker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gpg-data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - vulnerability-tests
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">gvm-tools&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">image&lt;/span>: greenbone/gvm-tools
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gvmd_socket_vol:/run/gvmd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - ospd_openvas_socket_vol:/run/ospd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - gvmd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - ospd-openvas
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">gpg_data_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">scap_data_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">cert_data_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">data_objects_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">gvmd_data_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">psql_data_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">vt_data_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">notus_data_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">psql_socket_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">gvmd_socket_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">ospd_openvas_socket_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">redis_socket_vol&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="2-下載及啓動-containers"
>2. 下載及啓動 containers&lt;a href="#2-%e4%b8%8b%e8%bc%89%e5%8f%8a%e5%95%93%e5%8b%95-containers"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>透過下面的語法，直接下載 Greenbone Community Containers，下載過程會需要一下下時間。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ docker compose -f docker-compose.yml -p greenbone-community-edition pull
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">[&lt;/span>+&lt;span style="color:#ff79c6">]&lt;/span> Running 111/16
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ redis-server &lt;span style="color:#bd93f9">4&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 86.7s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ ospd-openvas &lt;span style="color:#bd93f9">21&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 165.9s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ gpg-data &lt;span style="color:#bd93f9">2&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 62.3s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ notus-data &lt;span style="color:#bd93f9">4&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 98.7s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ scap-data &lt;span style="color:#bd93f9">2&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 74.7s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ mqtt-broker &lt;span style="color:#bd93f9">3&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 92.6s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ gvmd &lt;span style="color:#bd93f9">10&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 144.5s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ dfn-cert-data &lt;span style="color:#bd93f9">2&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 43.3s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ gvm-tools &lt;span style="color:#bd93f9">7&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿⣿⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 127.8s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ cert-bund-data &lt;span style="color:#bd93f9">2&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 44.4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ vulnerability-tests &lt;span style="color:#bd93f9">3&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 86.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ gsa &lt;span style="color:#bd93f9">11&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 139.8s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ notus-scanner &lt;span style="color:#bd93f9">9&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿⣿⣿⣿⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 147.7s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ report-formats &lt;span style="color:#bd93f9">2&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 31.6s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ pg-gvm &lt;span style="color:#bd93f9">11&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 158.9s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ data-objects &lt;span style="color:#bd93f9">2&lt;/span> layers &lt;span style="color:#ff79c6">[&lt;/span>⣿⣿&lt;span style="color:#ff79c6">]&lt;/span> 0B/0B Pulled 33.3s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>都出現 Pulled 下載完成後，就可以透過下面的方式進行啓動。&lt;/p>
&lt;blockquote>
&lt;p>Note: &lt;code>-d&lt;/code> 以背景方式啓動&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ docker compose -f docker-compose.yml -p greenbone-community-edition up -d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">[&lt;/span>+&lt;span style="color:#ff79c6">]&lt;/span> Running 29/29
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Network greenbone-community-edition_default Created 0.1s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_gvmd_socket_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_scap_data_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_psql_data_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_redis_socket_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_data_objects_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_vt_data_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_cert_data_vol&amp;#34;&lt;/span> Created 0.1s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_psql_socket_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_ospd_openvas_socket_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_gvmd_data_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_gpg_data_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Volume &lt;span style="color:#f1fa8c">&amp;#34;greenbone-community-edition_notus_data_vol&amp;#34;&lt;/span> Created 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-mqtt-broker-1 Started 9.2s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-redis-server-1 Started 10.5s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-vulnerability-tests-1 Exited 70.4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-gpg-data-1 Exited 70.4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-cert-bund-data-1 Exited 70.3s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-notus-data-1 Started 15.5s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-pg-gvm-1 Started 12.7s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-data-objects-1 Exited 70.4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-scap-data-1 Exited 70.4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-report-formats-1 Exited 69.7s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-dfn-cert-data-1 Exited 69.7s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-notus-scanner-1 Started 43.8s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-ospd-openvas-1 Started 70.7s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-gvmd-1 Started 68.6s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-gvm-tools-1 Started 69.7s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ✔ Container greenbone-community-edition-gsa-1 Started 69.9s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="3-設定-admin-密碼"
>3. 設定 Admin 密碼&lt;a href="#3-%e8%a8%ad%e5%ae%9a-admin-%e5%af%86%e7%a2%bc"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>如果要使用自己定義的 Admin 密碼，可以使用下面的語法來做修改。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ docker compose -f docker-compose.yml -p greenbone-community-edition &lt;span style="color:#f1fa8c">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c">&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">exec&lt;/span> -u gvmd gvmd gvmd --user&lt;span style="color:#ff79c6">=&lt;/span>admin --new-password&lt;span style="color:#ff79c6">=&lt;/span>&amp;lt;admin-password&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="4-開啓瀏覽器開始使用"
>4. 開啓瀏覽器開始使用&lt;a href="#4-%e9%96%8b%e5%95%93%e7%80%8f%e8%a6%bd%e5%99%a8%e9%96%8b%e5%a7%8b%e4%bd%bf%e7%94%a8"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>在完成前述步驟後，就可打開瀏覽器開始使用 Greenbone Community Edition 了。下面語法可以開啓系統預設的瀏覽器。或是自行打開瀏覽器，在網址列輸入 &lt;code>http://127.0.0.1:9392&lt;/code> 就可以看到登入畫面。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ xdg-open &lt;span style="color:#f1fa8c">&amp;#34;http://127.0.0.1:9392&amp;#34;&lt;/span> 2&amp;gt;/dev/null &amp;gt;/dev/null &amp;amp;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 class="group " id="更新內容"
>更新內容&lt;a href="#%e6%9b%b4%e6%96%b0%e5%85%a7%e5%ae%b9"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;h3 class="group " id="1-更新-containers"
>1. 更新 Containers&lt;a href="#1-%e6%9b%b4%e6%96%b0-containers"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>更新 Greenbone Community Containers 的方式，只要重新拉取 images 然後再重新啓動 container 就可以了。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ docker compose -f docker-compose.yml -p greenbone-community-edition pull
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ docker compose -f docker-compose.yml -p greenbone-community-edition up -d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="2-greenbone-community-feed-更新"
>2. Greenbone Community Feed 更新&lt;a href="#2-greenbone-community-feed-%e6%9b%b4%e6%96%b0"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>Greenbone Community Feed 的同步更新有兩個部分組成：&lt;/p>
&lt;ol>
&lt;li>拉取新的 data container images&lt;/li>
&lt;li>透過 daemon 加載到記憶體和資料庫中&lt;/li>
&lt;/ol>
&lt;p>Greenbone Community Feed 資料是透過幾個 container images 提供的，當這些 images 被啓動之後會自動複製到 docker volume，然後 daemon 會從 docker volume 中取得資料。&lt;/p>
&lt;p>下面的語法可以下載 Greenbone Community Feed 的 data container images&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ docker compose -f docker-compose.yml -p greenbone-community-edition pull notus-data vulnerability-tests scap-data dfn-cert-data cert-bund-data report-formats data-objects
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下面的語法啓動 container images 來複製資料至 docker volume&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ docker compose -f docker-compose.yml -p greenbone-community-edition up -d notus-data vulnerability-tests scap-data dfn-cert-data cert-bund-data report-formats data-objects
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 class="group " id="結語"
>結語&lt;a href="#%e7%b5%90%e8%aa%9e"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>使用 docker compose 方式，來安裝 Greenbone Community Edition Containers 以使用 OpenVAS 弱點掃描工具，是一個相對容易且馬上可以進行弱點掃描的方法。
網頁應用軟體的普及和方便性，身為開發者的我們，對於資安更需要多些重視。定期利用 OpenVAS 這類弱點掃描工具，來發覺系統或程式的漏洞，即時的進行修補及更正，會是我們該常駐的理念，以保障使用者的安全性。&lt;/p>
&lt;p>參考資料：&lt;/p>
&lt;ol>
&lt;li>&lt;a
class="link"
href="https://greenbone.github.io/docs/latest/22.4/container/index.html#"target="_blank" rel="noopener">Greenbone Community Containers 22.4 - Greenbone Community Documentation&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://greenbone.github.io/docs/latest/22.4/container/workflows.html"target="_blank" rel="noopener">Workflows - Greenbone Community Documentation&lt;/a
>
&lt;/li>
&lt;/ol></description></item><item><title>修改 Docker 預設資料目錄路徑</title><link>https://blog.ninthday.me/2023/03/change-docker-data-directory/</link><pubDate>Wed, 01 Mar 2023 15:26:58 +0800</pubDate><guid>https://blog.ninthday.me/2023/03/change-docker-data-directory/</guid><description>&lt;p>Docker 預設使用的路徑為 &lt;code>/var/lib/docker&lt;/code> 這個資料夾會儲存所有的 images, volumes 等等的內容，隨着使用時間會漸漸增加到非常大。如果和我一樣 &lt;code>/var&lt;/code> 是掛載的獨立分割區，空間被佔用滿了就會影響系統的運行。&lt;/p>
&lt;p>我們可以透過修改設定的方式，將預設的資料路徑更改至不同位置。在開始之前，我們用 &lt;code>docker info&lt;/code> 指令，先觀察 &lt;code>Docker Root Dir&lt;/code> 目前使用的預設資料夾路徑是什麼。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ docker info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...略...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Docker Root Dir: /var/lib/docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Debug Mode: &lt;span style="color:#8be9fd;font-style:italic">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...略...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>瞭解現在的路徑，在完成所有步驟後可以用來比對是否更動。我們可以開始進行修改的步驟如下：&lt;/p>
&lt;h3 class="group " id="1-停止-docker-運行"
>1. 停止 docker 運行&lt;a href="#1-%e5%81%9c%e6%ad%a2-docker-%e9%81%8b%e8%a1%8c"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>停止正在運行的 docker daemon&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo systemctl stop docker.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ sudo systemctl stop docker.socket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>確認 docker 是不是真的停止運行&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo systemctl status docker.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="2--新增設定檔"
>2. 新增設定檔&lt;a href="#2--%e6%96%b0%e5%a2%9e%e8%a8%ad%e5%ae%9a%e6%aa%94"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>新增一個設定檔來告訴 docker 資料目錄的位置，設定檔的位置及檔案名稱為 &lt;code>/etc/docker/daemon.json&lt;/code>， 設定檔為 json 格式內容填寫如下：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">&amp;#34;data-root&amp;#34;&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#34;/path/to/your/new/docker/root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Note:
&lt;code>/path/to/your/new/docker/root&lt;/code> 為要用來放置 docker 資料目錄的新路徑&lt;/p>
&lt;/blockquote>
&lt;h3 class="group " id="3-複製當前資料目錄內容"
>3. 複製當前資料目錄內容&lt;a href="#3-%e8%a4%87%e8%a3%bd%e7%95%b6%e5%89%8d%e8%b3%87%e6%96%99%e7%9b%ae%e9%8c%84%e5%85%a7%e5%ae%b9"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>使用 &lt;code>rsync&lt;/code> 或是 &lt;code>cp&lt;/code> 指令，將當前資料目錄的內容複製至新的位置。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo rsync -aP /var/lib/docker/ &lt;span style="color:#f1fa8c">&amp;#34;/path/to/your/new/docker/root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>or
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ sudo cp -rp /var/lib/docker/* &lt;span style="color:#f1fa8c">&amp;#34;/path/to/your/new/docker/root/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="4-修改舊資料目錄名稱"
>4. 修改舊資料目錄名稱&lt;a href="#4-%e4%bf%ae%e6%94%b9%e8%88%8a%e8%b3%87%e6%96%99%e7%9b%ae%e9%8c%84%e5%90%8d%e7%a8%b1"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>在完成前述複製步驟之後，將舊的資料目錄修改名稱，目的是希望用來確認 docker daemon 不會去用原來的資料目錄。（會找不到路徑）&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo mv /var/lib/docker /var/lib/docker.old
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="5-啓動-docker-及檢查"
>5. 啓動 docker 及檢查&lt;a href="#5-%e5%95%93%e5%8b%95-docker-%e5%8f%8a%e6%aa%a2%e6%9f%a5"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>重新啓動執行 docker daemon。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo systemctl start docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker daemon 開始運行之後，再用 &lt;code>docker info&lt;/code> 指令來檢查是不是套用可新設定的 &lt;code>Docker Root Dir&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ docker info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...略...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Docker Root Dir: /path/to/your/new/docker/root
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Debug Mode: &lt;span style="color:#8be9fd;font-style:italic">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...略...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="6-刪除舊資料夾"
>6. 刪除舊資料夾&lt;a href="#6-%e5%88%aa%e9%99%a4%e8%88%8a%e8%b3%87%e6%96%99%e5%a4%be"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>如果在使用上都沒有問題，就可以把原先舊的預設資料目錄移除，釋放出空間給系統使用。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ sudo rm -rf /var/lib/docker.old
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>參考資料：
&lt;a
class="link"
href="https://tienbm90.medium.com/how-to-change-docker-root-data-directory-89a39be1a70b"target="_blank" rel="noopener">How to change docker root data directory | by DPBD90 | Medium&lt;/a
>
&lt;/p></description></item><item><title>phpMyAdmin 啟用兩階段驗證</title><link>https://blog.ninthday.me/2023/01/enable-phpmyadmin-2fa/</link><pubDate>Sat, 14 Jan 2023 18:24:24 +0800</pubDate><guid>https://blog.ninthday.me/2023/01/enable-phpmyadmin-2fa/</guid><description>&lt;p>phpMyAdmin 是一個以 PHP 為基礎開發，Web-Base 方式架構在伺服器上圖形化的 MySQL/MariaDB 的資料庫管理工具。&lt;/p>
&lt;p>安裝完 phpMyAdmin 登入時，若在首頁下方出現如下圖的提示警告訊息 &lt;strong>The phpMyAdmin configuration storage is not completely configured, some extended features have been deactivated.&lt;/strong>&lt;/p>
&lt;p>
&lt;/p>
&lt;p>表示缺少「phpmyadmin」資料庫可以用來儲存 phpMyAdmin 的一些額外設定，而啓用兩階段的功能也會需要這個 &lt;strong>phpMyAdmin Configuration Storage&lt;/strong> 來儲存個人的 2FA 設定內容。&lt;/p>
&lt;p>
&lt;/p>
&lt;h2 class="group " id="建立-phpmyadmin-configuration-storage"
>建立 phpMyAdmin Configuration Storage&lt;a href="#%e5%bb%ba%e7%ab%8b-phpmyadmin-configuration-storage"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>若要開啓 &lt;strong>phpMyAdmin Configuration Storage&lt;/strong> 有兩個已知的方式：&lt;/p>
&lt;ol>
&lt;li>匯入 phpMyAdmin 中的 &lt;code>create_tables.sql&lt;/code> 建立 &lt;code>phpmyadmin&lt;/code> 資料庫&lt;/li>
&lt;li>在頁面檢測的結果選擇 &lt;strong>Create&lt;/strong> 的連結&lt;/li>
&lt;/ol>
&lt;h3 class="group " id="匯入-create_tables-建立資料庫"
>匯入 create_tables 建立資料庫&lt;a href="#%e5%8c%af%e5%85%a5-create_tables-%e5%bb%ba%e7%ab%8b%e8%b3%87%e6%96%99%e5%ba%ab"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>我們可以在 phpMyAdmin 中的 sql 資料夾（&lt;code>phpmyadmin/sql/&lt;/code>）下，找到名稱為 &lt;code>create_tables.sql&lt;/code> 的 SQL 檔，這個 SQL 檔能夠用來建立儲存進階功能設定的 &lt;code>phpmyadmin&lt;/code> 資料庫。&lt;/p>
&lt;p>
&lt;/p>
&lt;p>可以在 command line 用 mysql cli 工具匯入，指令如下：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ mysql -u root -p &amp;lt; sql/create_tables.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>也可使用 phpMyAdmin 提供的圖形化界面的匯入功能，將 &lt;code>create_tables.sql&lt;/code> 檔案匯入。成功的匯入後就能看到增加了一個 &lt;code>papmyadmin&lt;/code> 資料庫，其中有許多以 &lt;code>pma__&lt;/code> 開頭的資料表。&lt;/p>
&lt;h3 class="group " id="頁面檢測的結果的-create-連結"
>頁面檢測的結果的 Create 連結&lt;a href="#%e9%a0%81%e9%9d%a2%e6%aa%a2%e6%b8%ac%e7%9a%84%e7%b5%90%e6%9e%9c%e7%9a%84-create-%e9%80%a3%e7%b5%90"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>首頁下方警告訊息 「The phpMyAdmin configuration storage &amp;hellip;略&amp;hellip; deactivated」 緊接着一個 &lt;strong>Find out why&lt;/strong> 的連結，點擊之後，會轉換到 phpMyAdmin configuration storage 檢查程序頁面，頁面檢查失敗時出現另一個警告訊息 「Create a database named &amp;lsquo;phpmyadmin&amp;rsquo; and setup the phpMyAdmin configuration storage there」，最前方的 &lt;strong>Create&lt;/strong> 為一個可以點擊的超連結。這個連結會帶我們到建立 &lt;code>phpmyadmin&lt;/code> 資料庫的頁面。&lt;/p>
&lt;p>
&lt;/p>
&lt;h2 class="group " id="建立-configuration-storage-設定"
>建立 configuration storage 設定&lt;a href="#%e5%bb%ba%e7%ab%8b-configuration-storage-%e8%a8%ad%e5%ae%9a"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>在資料庫中，我們不會讓所有的使用者都擁有可以完全修改 &lt;code>phpmyadmin&lt;/code> 資料庫的權限，避免s使用者不小心更動或是刪除別人的資料，所以我們需要新增一個專門給 configuration storage 使用的帳號並賦予權限，專門用來操控這些進階設定儲存用。&lt;/p>
&lt;h3 class="group " id="建立使用者及密碼"
>建立使用者及密碼&lt;a href="#%e5%bb%ba%e7%ab%8b%e4%bd%bf%e7%94%a8%e8%80%85%e5%8f%8a%e5%af%86%e7%a2%bc"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>使用具有資料庫管理者權限的帳號登入資料庫，建立給 configuration storage 使用的新使用者帳號及密碼，名稱可以自訂。並給予在 &lt;code>phpmyadmin&lt;/code> 資料庫中有 &lt;code>SELECT&lt;/code>、&lt;code>INSERT&lt;/code>、 &lt;code>UPDATE&lt;/code>、&lt;code>DELETE&lt;/code> 四個權限。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>MariaDB [(&lt;span style="color:#ff79c6">none&lt;/span>)]&lt;span style="color:#ff79c6">&amp;gt;&lt;/span> &lt;span style="color:#ff79c6">CREATE&lt;/span> &lt;span style="color:#ff79c6">USER&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma&amp;#39;&lt;/span>&lt;span style="color:#ff79c6">@&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;localhost&amp;#39;&lt;/span> IDENTIFIED &lt;span style="color:#ff79c6">BY&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;password&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>MariaDB [(&lt;span style="color:#ff79c6">none&lt;/span>)]&lt;span style="color:#ff79c6">&amp;gt;&lt;/span> &lt;span style="color:#ff79c6">GRANT&lt;/span> &lt;span style="color:#ff79c6">SELECT&lt;/span>, &lt;span style="color:#ff79c6">INSERT&lt;/span>, &lt;span style="color:#ff79c6">UPDATE&lt;/span>, &lt;span style="color:#ff79c6">DELETE&lt;/span> &lt;span style="color:#ff79c6">ON&lt;/span> phpmyadmin.&lt;span style="color:#ff79c6">*&lt;/span> &lt;span style="color:#ff79c6">TO&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma&amp;#39;&lt;/span>&lt;span style="color:#ff79c6">@&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;localhost&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>MariaDB [(&lt;span style="color:#ff79c6">none&lt;/span>)]&lt;span style="color:#ff79c6">&amp;gt;&lt;/span> FLUSH &lt;span style="color:#ff79c6">PRIVILEGES&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="修改-configincphp-設定檔"
>修改 config.inc.php 設定檔&lt;a href="#%e4%bf%ae%e6%94%b9-configincphp-%e8%a8%ad%e5%ae%9a%e6%aa%94"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>開啟 &lt;code>config.inc.php&lt;/code> 設定檔，在對應的 &lt;code>$cfg['Servers'][$i]&lt;/code> 加入如下的設定內容，&lt;code>controluser&lt;/code> 為前一個步驟設定的帳號名稱，&lt;code>controlpass&lt;/code> 為前一個步驟設定的密碼。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> * phpMyAdmin configuration storage settings.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">/* User used to manipulate with storage */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;controluser&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;controlpass&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pmapass&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">/* Storage database and tables */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;pmadb&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;phpmyadmin&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;bookmarktable&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__bookmark&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;relation&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__relation&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;table_info&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__table_info&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;table_coords&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__table_coords&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;pdf_pages&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__pdf_pages&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;column_info&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__column_info&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;history&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__history&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;table_uiprefs&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__table_uiprefs&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;tracking&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__tracking&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;userconfig&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__userconfig&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;recent&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__recent&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;favorite&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__favorite&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;users&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__users&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;usergroups&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__usergroups&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;navigationhiding&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__navigationhiding&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;savedsearches&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__savedsearches&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;central_columns&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__central_columns&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;designer_settings&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__designer_settings&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">$cfg&lt;/span>[&lt;span style="color:#f1fa8c">&amp;#39;Servers&amp;#39;&lt;/span>][&lt;span style="color:#8be9fd;font-style:italic">$i&lt;/span>][&lt;span style="color:#f1fa8c">&amp;#39;export_templates&amp;#39;&lt;/span>] &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;pma__export_templates&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 class="group " id="開啓兩階段認證"
>開啓兩階段認證&lt;a href="#%e9%96%8b%e5%95%93%e5%85%a9%e9%9a%8e%e6%ae%b5%e8%aa%8d%e8%ad%89"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>再回到 phpMyAdmin 的頁面，&lt;strong>Setting&lt;/strong> -&amp;gt; &lt;strong>Two-factor authentication&lt;/strong>，在 &lt;strong>Configure Two-factor authentication&lt;/strong> 區塊中選擇 &lt;strong>Authentication Application (2FA)&lt;/strong>，再按下 &lt;strong>Configure two-factor authentication&lt;/strong> 按鈕。&lt;/p>
&lt;p>
&lt;/p>
&lt;p>接著會出現一個 QRCode 的畫面，打開行動設備中的 Google Authenticator 軟體（或是 Authy）軟體，掃描頁面上的 QRCode，再將出現的 OTP(One-Time Password) 填入 QRCode 下方的輸入格，
最後按下 &lt;strong>Enable two-factor authentication&lt;/strong> 就完成整個步驟。&lt;/p>
&lt;p>
&lt;/p>
&lt;h2 class="group " id="關閉兩階段驗證"
>關閉兩階段驗證&lt;a href="#%e9%97%9c%e9%96%89%e5%85%a9%e9%9a%8e%e6%ae%b5%e9%a9%97%e8%ad%89"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>如果要關閉兩階段驗證，同樣回到 &lt;strong>Setting&lt;/strong> -&amp;gt; &lt;strong>Two-factor authentication&lt;/strong>，按下 &lt;strong>Disable two-factor authentication&lt;/strong> 即可。
&lt;/p>
&lt;p>參考資料：&lt;/p>
&lt;ol>
&lt;li>&lt;a
class="link"
href="https://blog.eprint.com.tw/phpmyadmin-with-two-factor-authentication/"target="_blank" rel="noopener">phpMyAdmin兩步驟驗證 | 易普印 e知識百科&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://blog.kawai.moe/linux/phpmyadmin-%E5%95%9F%E7%94%A82fa/"target="_blank" rel="noopener">phpMyAdmin 啟用2FA - linux | 丁丁的亂寫空間&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://www.vpsdada.com/tools/phpmyadmin-two-factor-authentication/"target="_blank" rel="noopener">phpMyAdmin 双因素身份验证配置 - VPSdada&lt;/a
>
&lt;/li>
&lt;/ol></description></item><item><title>Ubuntu Netplan Static IP 設定</title><link>https://blog.ninthday.me/2023/01/ubuntu-netplan-static-ip/</link><pubDate>Mon, 09 Jan 2023 09:35:58 +0800</pubDate><guid>https://blog.ninthday.me/2023/01/ubuntu-netplan-static-ip/</guid><description>&lt;p>
&lt;/p>
&lt;h2 class="group " id="什麼是-netplan"
>什麼是 Netplan&lt;a href="#%e4%bb%80%e9%ba%bc%e6%98%af-netplan"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>自 Ubuntu 17.10 開始網路的設定就改為使用 netplan 工具作為前端設定工具，我們只需要撰寫少量的設定內容，就可以讓 netplan 生成後端的網路設定文件，無論後端是使用 NetworkManager 或是 Systemd-networkd。&lt;/p>
&lt;h2 class="group " id="netplan-設定"
>Netplan 設定&lt;a href="#netplan-%e8%a8%ad%e5%ae%9a"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>
&lt;/p>
&lt;p>netplan 的設定是使用 YAML 格式撰寫，設定檔在 &lt;code>/etc/netplan&lt;/code> 路徑下，新安裝時如果有設定 IP 應該會出現如 &lt;code>/etc/netplan/00-installer-config.yaml&lt;/code> 的設定檔。若完全沒有任何設定檔，可以使用以下指令自動產生預設的設定檔：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4"># 產生網路介面設定檔&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ sudo netplan generate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>編輯設定檔文件 &lt;code>sudo vim /etc/netplan/00-installer-config.yaml&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml:00-installer-config.yaml" data-lang="yaml:00-installer-config.yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">network&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">version&lt;/span>: &lt;span style="color:#bd93f9">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">renderer&lt;/span>: networkd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">ethernets&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">enp0s31f6&lt;/span>: &lt;span style="color:#6272a4"># 系統網路卡名稱&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">addresses&lt;/span>: [&lt;span style="color:#bd93f9">192.168.0.10&lt;/span>/24] &lt;span style="color:#6272a4"># 固定 IP 位址&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">gateway4&lt;/span>: &lt;span style="color:#bd93f9">192.168.0.1&lt;/span> &lt;span style="color:#6272a4"># 閘道器設定&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">nameservers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">addresses&lt;/span>: [&lt;span style="color:#bd93f9">1.1.1.1&lt;/span>,&lt;span style="color:#bd93f9">8.8.8.8&lt;/span>] &lt;span style="color:#6272a4">#DNS伺服器位址&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>執行 &lt;code>netplan try&lt;/code> 測試並套用網路設定檔&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4"># 測試並套用網路設定檔&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ sudo netplan try
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Note:
執行指令之後如果設定檔語法沒問題，就會套用新的設定並進行確認，如果 &lt;strong>在 120 秒內沒有確認&lt;/strong>，就會自動恢復成原來的網路設定，這樣的設計主要是避免在遠端更改設定時，不小心把自己檔在外面。&lt;/p>
&lt;/blockquote>
&lt;p>使用 &lt;code>netplan apply&lt;/code> 命令讓網路進行生效。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4"># 套用網路介面設定檔&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ sudo netplan apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 class="group " id="gateway4-名稱更換"
>gateway4 名稱更換&lt;a href="#gateway4-%e5%90%8d%e7%a8%b1%e6%9b%b4%e6%8f%9b"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>若出現如下的警告訊息，先別緊張。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-mysql" data-lang="mysql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">**&lt;/span> (generate:&lt;span style="color:#bd93f9">1319&lt;/span>): WARNING &lt;span style="color:#ff79c6">**&lt;/span>: &lt;span style="color:#bd93f9">09&lt;/span>:&lt;span style="color:#bd93f9">05&lt;/span>:&lt;span style="color:#bd93f9">28&lt;/span>.&lt;span style="color:#bd93f9">876&lt;/span>: &lt;span style="color:#ff79c6">`&lt;/span>gateway4&lt;span style="color:#ff79c6">`&lt;/span> has been deprecated, &lt;span style="color:#ff79c6">use&lt;/span> &lt;span style="color:#ff79c6">default&lt;/span> routes instead.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>See the &lt;span style="color:#f1fa8c">&amp;#39;Default routes&amp;#39;&lt;/span> section of the documentation &lt;span style="color:#ff79c6">for&lt;/span> more details.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這段警告主要原因是在 Ubuntu Server 22.04 中，原來的 &lt;code>gateway4&lt;/code> 項目即將要失效，即使出現上述警告仍能正常的使用網路，未來將更改為 &lt;code>routes&lt;/code> 名稱，建議還是修改設定為新的名稱內容。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">network&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">version&lt;/span>: &lt;span style="color:#bd93f9">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">renderer&lt;/span>: networkd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">ethernets&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">enp0s31f6&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">addresses&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#bd93f9">192.168.0.10&lt;/span>/24
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">routes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">to&lt;/span>: default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">via&lt;/span>: &lt;span style="color:#bd93f9">192.168.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">nameservers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">addresses&lt;/span>: [&lt;span style="color:#bd93f9">1.1.1.1&lt;/span>,&lt;span style="color:#bd93f9">8.8.8.8&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 class="group " id="檢查設定結果"
>檢查設定結果&lt;a href="#%e6%aa%a2%e6%9f%a5%e8%a8%ad%e5%ae%9a%e7%b5%90%e6%9e%9c"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>執行以下指令查看網路的 ip 位址，&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ip address show enp0s31f6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>要查看預設的路由，可以執行&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ip route show
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>default via 192.168.0.1 dev enp0s31f6 proto dhcp metric &lt;span style="color:#bd93f9">100&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>169.254.0.0/16 dev enp0s31f6 scope link metric &lt;span style="color:#bd93f9">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>192.168.0.0/24 dev enp0s31f6 proto kernel scope link src 192.168.0.51 metric &lt;span style="color:#bd93f9">100&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>參考資料：&lt;/p>
&lt;ol>
&lt;li>&lt;a
class="link"
href="https://netplan.io/examples"target="_blank" rel="noopener">Canonical Netplan&lt;/a
>
&lt;/li>
&lt;/ol></description></item><item><title>GCP VPC Network Peering</title><link>https://blog.ninthday.me/2023/01/gcp-vpc-network-peering/</link><pubDate>Mon, 02 Jan 2023 13:08:04 +0800</pubDate><guid>https://blog.ninthday.me/2023/01/gcp-vpc-network-peering/</guid><description>&lt;p>在 Google Cloud Platform 中，如果要將兩個不同的 project 或是不同 organization 的 Private Network 相連，可以透過 VPC network peering 的方式來達成，讓一些服務可以在 Private 下互通，降低使用外網的風險來增加安全性。&lt;/p>
&lt;p>VPC network peering 有幾項需要注意的部分：&lt;/p>
&lt;ol>
&lt;li>一個 Network 最多只能有 25 個 peering Networks&lt;/li>
&lt;li>一個 Network 和 peered Networks 最多能有 15,500 個 instance。&lt;/li>
&lt;li>Peered Networks 間的 subnet IP range 不能重疊，如果一個有 &lt;code>10.1.0.0/16&lt;/code>，另一個就一定不能重複。&lt;/li>
&lt;li>只支援 VPC Network Peering 不支援 legacy networks&lt;/li>
&lt;li>不能透過 peered networks 連線至 VPN&lt;/li>
&lt;/ol>
&lt;h2 class="group " id="1-建立-peering-設定"
>1. 建立 Peering 設定&lt;a href="#1-%e5%bb%ba%e7%ab%8b-peering-%e8%a8%ad%e5%ae%9a"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>在建立之前，先將要 peering 的兩個 Project 建立好 VPC 網路及其 subnet。會在兩個專案中建立 peering 相互連結只對方。&lt;/p>
&lt;p>開啟 Google Cloud console，選擇（或搜尋）VPC network 點選其中的 &lt;strong>VPC network peering&lt;/strong>。&lt;/p>
&lt;ol>
&lt;li>在列表上方點擊 &lt;strong>CREATE PEERING CONNECTION&lt;/strong> 開始&lt;/li>
&lt;li>看到簡短說明和提示後點擊 &lt;strong>CONTINUE&lt;/strong> 繼續&lt;/li>
&lt;li>輸入這個 connection 要什麼名稱&lt;/li>
&lt;li>選擇在專案中要作為 peering 的 VPC&lt;/li>
&lt;li>因為我們要和另一個專案 Peer，點選 &lt;strong>In another project&lt;/strong>&lt;/li>
&lt;li>填入另一個 &lt;strong>Project ID&lt;/strong>，注意不是填入 Project Name&lt;/li>
&lt;li>輸入另一個專案下要連結的 VPC network 名稱&lt;/li>
&lt;li>最後按下 &lt;strong>CREATE&lt;/strong> 建立
&lt;/li>
&lt;/ol>
&lt;p>建立後，在另一個專案完成設定前，Status 會顯示為 inactive 狀態。
&lt;/p>
&lt;h2 class="group " id="2-對等建立-peering-設定"
>2. 對等建立 Peering 設定&lt;a href="#2-%e5%b0%8d%e7%ad%89%e5%bb%ba%e7%ab%8b-peering-%e8%a8%ad%e5%ae%9a"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>同樣的步驟，在另一個專案中也完成建立對等的 VPC network peering connection。當要連線的兩個專案都建立好到對方的連線後，在彼此 connection 列表中的狀態就會顯示為 &lt;strong>Active&lt;/strong> 了！
&lt;/p>
&lt;h2 class="group " id="3-測試連線"
>3. 測試連線&lt;a href="#3-%e6%b8%ac%e8%a9%a6%e9%80%a3%e7%b7%9a"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>完成前述建立 VPC networking peering 的步驟之後，就可以在兩邊的 GCE 中進行測試。作為測試的這兩台 GCE，網路部分要是已經建立連結的 VPC subnet，SSH 連結進入 GCE 中，在 Terminal 中以 &lt;code>ping&lt;/code> 指令相互測試對方的 &lt;strong>Internal IP&lt;/strong>，如果可以看到 ping 的回應就表示兩邊的 VPC network peering 建立已經成功。&lt;/p>
&lt;h2 class="group " id="後記"
>後記&lt;a href="#%e5%be%8c%e8%a8%98"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>原本希望在建立 VPC neetwork peering 之後，可以讓 Project B 的 GCE 能夠連結 Project A 中的 CloudSQL，Project A 中的 CloudSQL 設定僅能 private 才可以連線。&lt;/p>
&lt;p>實際測試在 Project B 中的 GCE 一樣是無法連上 CloudSQL，查詢了一下可能的原因，當 CloudSQL 建立的時候，在 GCP 上實際是建立了一個專案用 VPC network peering 的方式連結過去，當 Project A &amp;lt;&amp;mdash;&amp;ndash;&amp;gt; Project B，Project B &amp;lt;&amp;mdash;&amp;ndash;&amp;gt; Project C 都建立好 peering connection 時，Project A &amp;lt;&amp;ndash;x&amp;ndash;&amp;gt; Project C 這兩個專案是沒有直接連結的。&lt;/p>
&lt;p>所以我們無法讓 Project B 直接連結到 CloudSQL，因為建立 peering 是兩個專案都要設定才行，根據這篇 &lt;a
class="link"
href="https://community.c2cglobal.com/infrastructure-122/how-can-i-access-the-cloud-sql-with-private-ip-only-from-another-project-vpc-953"target="_blank" rel="noopener">How can I access the Cloud SQL with private IP only from another Project/VPC? | C2C Community&lt;/a
>
內容說明，如果要這麼做只能請 Google Cloud Platform 那邊幫忙設定了。另一個方式，則是使用 Shared VPC 的方式來實現了。&lt;/p>
&lt;hr>
&lt;p>參考資料：&lt;/p>
&lt;ol>
&lt;li>&lt;a
class="link"
href="https://cloud.google.com/vpc/docs/vpc-peering"target="_blank" rel="noopener">VPC Network Peering | Google Cloud&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://ikala.cloud/vpc-network-peering/"target="_blank" rel="noopener">[手把手教學] VPC Network peering 基本介紹 - iKala Cloud&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://ithelp.ithome.com.tw/m/articles/10265026"target="_blank" rel="noopener">iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天&lt;/a
>
&lt;/li>
&lt;/ol></description></item><item><title>GitHub Pages 使用自定的 Domain Name</title><link>https://blog.ninthday.me/2022/12/github-pages-custom-domain/</link><pubDate>Sun, 25 Dec 2022 13:52:02 +0800</pubDate><guid>https://blog.ninthday.me/2022/12/github-pages-custom-domain/</guid><description>&lt;p>當我們將靜態網頁的內容上傳至 GitHub Page 後，我們可以使用 &lt;code>https://your-username.github.io&lt;/code> 瀏覽上傳的內容，但如果想更具自己代表性，我們可以更換使用自己所購買網域的網址。&lt;/p>
&lt;h2 class="group " id="1-購買網域"
>1. 購買網域&lt;a href="#1-%e8%b3%bc%e8%b2%b7%e7%b6%b2%e5%9f%9f"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>在使用自己名稱的網址前，要先有屬於自己的域名，選擇自己習慣的網域代理商（我選擇的是 &lt;a
class="link"
href="https://www.gandi.net"target="_blank" rel="noopener">Gandi&lt;/a
>
）。獲得自己的網域名稱後，在域名的列表中可以看到目前擁有的域名有哪些。&lt;/p>
&lt;h2 class="group " id="2-設定-dns-record"
>2. 設定 DNS Record&lt;a href="#2-%e8%a8%ad%e5%ae%9a-dns-record"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>因為 Gandi 本身有提供 DNS Server 的服務，我們只需要在 Gandi 網站裡做好 Record 設定就可以使用，不用再自己架設 DNS 伺服器，蠻方便的。&lt;/p>
&lt;p>在域名列表中，選擇點選要成為 GitHub Page 使用的域名，進入後選擇「DNS 記錄」項目，在這裡我們可以新增和修改 DNS Record。DNS Record 有許多不同的類型，這次我們會使用的主要有 &lt;strong>A Record&lt;/strong> 及 &lt;strong>CNAME Record&lt;/strong>。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>A Record&lt;/strong> : A 代表的是 Address ，是紀錄 IP Address 與網域名稱的對應的記錄，A 記錄會將網域名稱指向一組 IP。&lt;/li>
&lt;li>&lt;strong>CNAME Record&lt;/strong> ： CNAME 是網域名稱的別名，用來將子域名指向另外一個主機的域名，最常見的就是將 www.abc.com（子域名）指向 abd.com（購買的主域名） ，避免使用者找不到網站。&lt;/li>
&lt;/ul>
&lt;h3 class="group " id="21-取得-github-ip"
>2.1 取得 GitHub IP&lt;a href="#21-%e5%8f%96%e5%be%97-github-ip"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>為了讓 GitHub Page 能夠支援使用 HTTPS 設定，依據&lt;a
class="link"
href="https://docs.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site#configuring-a-records-with-your-dns-provider"target="_blank" rel="noopener">官方文件&lt;/a
>
，需要在 DNS Record 中將 base domain 加入 GitHub 的 IP，我們可以使用 &lt;code>dig&lt;/code> 或是 &lt;code>host&lt;/code> 的方式查詢：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ dig ninthday.github.io +nostats +nocomments +nocmd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>;ninthday.github.io. IN A
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ninthday.github.io. 3525 IN A 185.199.111.153
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ninthday.github.io. 3525 IN A 185.199.109.153
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ninthday.github.io. 3525 IN A 185.199.108.153
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ninthday.github.io. 3525 IN A 185.199.110.153
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="22-新增-a-record"
>2.2 新增 A Record&lt;a href="#22-%e6%96%b0%e5%a2%9e-a-record"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>新增 &lt;strong>A&lt;/strong> 類型的 Record，將 &lt;code>@&lt;/code> 名稱設定至前一個步驟查詢到的 IP，如下
&lt;/p>
&lt;p>DNS 設定之後會需要等待一段時間才會生效，可以再用 &lt;code>dig&lt;/code> 指令查詢，出現下面的結果就是已經生效了。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ dig ninthday.me +nostats +nocomments +nocmd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ninthday.me. 10800 IN A 185.199.110.153
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ninthday.me. 10800 IN A 185.199.108.153
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ninthday.me. 10800 IN A 185.199.111.153
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ninthday.me. 10800 IN A 185.199.109.153
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="23-新增-cname--record"
>2.3 新增 CNAME Record&lt;a href="#23-%e6%96%b0%e5%a2%9e-cname--record"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>新增 &lt;strong>CNAME&lt;/strong> 類型的 Record，我希望將 &lt;code>blog.ninthday.me&lt;/code> 對應至 GitHub Page，因此設定的時候將名稱為 &lt;code>blog&lt;/code> 設定至 &lt;code>ninthday.hithub.io&lt;/code>。
&lt;/p>
&lt;h2 class="group " id="3--github-repo-設定"
>3. GitHub Repo 設定&lt;a href="#3--github-repo-%e8%a8%ad%e5%ae%9a"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>最後至 Github Pages 的 Repo 中設定 Custom domain（ &lt;code>Settings&lt;/code> -&amp;gt; &lt;code>Pages&lt;/code> ），&lt;code>Save&lt;/code> 之後 GitHub 會進行 DNS 的檢查，檢查成功後 GitHub 會在這個 Repo 下建立一個 CNAME 檔案，檔案的內容就是我們設定的 domain name 網址。&lt;/p>
&lt;p>
&lt;/p>
&lt;blockquote>
&lt;p>Note: 設定時，將下方 &lt;code>Enforce HTTPS&lt;/code> 勾選起來，GitHub 就會幫忙處理使用自己網址時的 HTTPS 憑證內容&lt;/p>
&lt;/blockquote>
&lt;p>之後當我們再瀏覽這個 Github Pages 時，網址顯示的就會是我們自定的網址，而不是 Github Pages 提供的 github.io 網址。&lt;/p>
&lt;hr>
&lt;p>參考資料：&lt;/p>
&lt;ol>
&lt;li>&lt;a
class="link"
href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site"target="_blank" rel="noopener">Managing a custom domain for your GitHub Pages site - GitHub Docs&lt;/a
>
&lt;/li>
&lt;/ol></description></item><item><title>修正 GCE 複製檔案至 GCS 權限錯誤</title><link>https://blog.ninthday.me/2021/05/gce-copy-to-gcs-accessdeny/</link><pubDate>Sun, 30 May 2021 01:12:52 +0800</pubDate><guid>https://blog.ninthday.me/2021/05/gce-copy-to-gcs-accessdeny/</guid><description>
&lt;h2 class="group " id="複製出現-403-錯誤"
>複製出現 403 錯誤&lt;a href="#%e8%a4%87%e8%a3%bd%e5%87%ba%e7%8f%be-403-%e9%8c%af%e8%aa%a4"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>GCE (Google Compute Engine) 在預設初始的狀態下，雖然硬碟映像檔中已經預先安裝 google cloud 工具在系統中，沒有調整權限的情形下利用 &lt;code>gsutil&lt;/code> 工具複製檔案至 GCS (Google Cloud Storage) ，如下面語法：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ gsutil cp /home/you/yourfile.txt gs://your-bucket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>執行後會出現 &lt;code>AccessDeniedException: 403 Insufficient Permission&lt;/code> 的錯誤訊息，即使在相同的專案及區域中也無法複製檔案至 GCS 上。&lt;/p>
&lt;h2 class="group " id="開啟-gce-instance-的-cloud-api-存取"
>開啟 GCE Instance 的 Cloud API 存取&lt;a href="#%e9%96%8b%e5%95%9f-gce-instance-%e7%9a%84-cloud-api-%e5%ad%98%e5%8f%96"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>預設下 GCE 虛擬機器可以對同一個專案下的 GCS 具有讀取權限，如果需要寫入 GCS 就需要先進行配置調整。瀏覽器開啟 &lt;a
class="link"
href="https://console.cloud.google.com/compute/instances"target="_blank" rel="noopener">GCP Console&lt;/a
>
，在下拉選單中選擇專案，在進行調整前需要先&lt;strong>停止&lt;/strong>虛擬機，然後才能進行編輯。&lt;/p>
&lt;p>確定 GCE 的虛擬機器停止後，點選虛擬機的名稱進入這臺虛擬機的詳細內容 (Detail)，點選上方的編輯，在編輯狀態中向下拉動畫面到&lt;code>存取權範圍&lt;/code> (Access Scopes)，可以看到預設是選在 &lt;code>允許預設存取權&lt;/code>，如果對於各項API熟悉，可以選擇 &lt;code>針對各個 API 設定存取權&lt;/code> 然後在&lt;strong>儲存空間&lt;/strong>部分將預設 &lt;code>唯讀&lt;/code> 更改成 &lt;code>讀寫&lt;/code>。&lt;/p>
&lt;p>如果不想一個一個調整，可以直接選擇 &lt;code>允許所有 Cloud API 的完整存取權&lt;/code> 這個項目。完成設定儲存後重新啟動 GCE 虛擬機器。&lt;/p>
&lt;h2 class="group " id="清除-gsutil-快取"
>清除 gsutil 快取&lt;a href="#%e6%b8%85%e9%99%a4-gsutil-%e5%bf%ab%e5%8f%96"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>完成重新啟動 GCE虛擬伺服器後，試著再執行複製檔案至 GCP 的語法。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ gsutil cp /home/you/yourfile.txt gs://your-bucket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果仍然遇到 &lt;code>AccessDeniedException: 403 Insufficient Permission&lt;/code> 的錯誤訊息，試著清除家目錄下的 .gsutil 快取資料夾。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ rm -r ~/.gsutil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>再重新執行一次複製應該就可以獲得成功。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ gsutil cp /home/you/yourfile.txt gs://your-bucket
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Operation completed over &lt;span style="color:#bd93f9">1&lt;/span> objects.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Laravel CICD with Github Actions</title><link>https://blog.ninthday.me/2021/02/laravel-cicd-github-actions/</link><pubDate>Sun, 28 Feb 2021 15:57:46 +0800</pubDate><guid>https://blog.ninthday.me/2021/02/laravel-cicd-github-actions/</guid><description>&lt;p>GitHub Actions 為 2019 年 11 月 GitHub 推出的服務，可以用來測試、封裝、發佈或是部署程式碼，一連串的動作建立自動化的流程，達到持續整合/持續部署（CI/CD）的目的。&lt;/p>
&lt;p>Github 讓開發者能將一些重複的動作寫成腳本，使其他開發者也可以引用這些 Action，把這些 Action 組合起來執行，就能夠完成前述 CI/CD 的過程。GitHub 為此成立了一個 Action 的 &lt;a
class="link"
href="https://github.com/marketplace?type=actions"target="_blank" rel="noopener">Marketplace&lt;/a
>
，可以搜尋到其他人上傳的 Action。&lt;/p>
&lt;p>這篇文章中，將使用 GitHub Actions 將 Laravel 專案測試及部署至自己的 Linux 伺服器上。&lt;/p>
&lt;h2 class="group " id="1-github-actions-名詞"
>1. GitHub Actions 名詞&lt;a href="#1-github-actions-%e5%90%8d%e8%a9%9e"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;ul>
&lt;li>Workflow（工作流程）：可設定為一個自動化流程的程序，Workflow 由一個或多個 Job 組成，可經由事件觸發執行，是 YAML 格式檔案放在 &lt;code>.github/workflows&lt;/code> 資料夾中。&lt;/li>
&lt;li>Job（任務）：每個 Job 由多個 Step 組成，一個 Job 會在一個新的執行實例中（instance）執行。不同的 Job 可以同時執行，也可以依照前面的 Job 狀態依順序執行。&lt;/li>
&lt;li>Step（步驟）：每個 Step 都是在相同的執行實例中執行，Step 可以是執行指令或是 Action。每個 Step 可以執行一個或多個 Action。&lt;/li>
&lt;li>Action（動作）：Workflow 最小單位。&lt;/li>
&lt;/ul>
&lt;h2 class="group " id="2-workflow-文件"
>2. Workflow 文件&lt;a href="#2-workflow-%e6%96%87%e4%bb%b6"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>GitHub Actions 的 workflow 文件為 YAML 格式，文件名稱可以自定但副檔名為 &lt;code>.yml&lt;/code>。GitHub 只要在 &lt;code>.github/workflows&lt;/code> 資料夾中發現有 &lt;code>.yml&lt;/code> 文件就會自動執行。&lt;/p>
&lt;p>這個 YAML 文件的語法分為幾個部分&lt;/p>
&lt;ul>
&lt;li>&lt;strong>name&lt;/strong>: workflow 名稱&lt;/li>
&lt;li>&lt;strong>on&lt;/strong>
指定觸發 workflow 的條件（事件）&lt;/li>
&lt;li>&lt;strong>jobs&lt;/strong>
workflow YAML 文件的主要部分，&lt;code>jobs&lt;/code> 中包含一或多個 &lt;code>job&lt;/code>，列出每一個 &lt;code>job_id&lt;/code>，可以使用 &lt;code>needs&lt;/code> 關鍵字指定和其他 &lt;code>job&lt;/code> 的依賴關係。使用 &lt;code>runs-on&lt;/code> 來指定執行的實例
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">jobs&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">my_first_job&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">name&lt;/span>: My first job
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">runs-on&lt;/span>: ubuntu-20.04
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">my_second_job&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">name&lt;/span>: My second job
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">needs&lt;/span>: my_first_job
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>上面例子有兩個 &lt;code>job&lt;/code>，&lt;code>job_id&lt;/code> 分別為 &lt;code>my_first_job&lt;/code> 和 &lt;code>my_second_job&lt;/code>，&lt;code>my_second_job&lt;/code> 依賴於 &lt;code>my_first_job&lt;/code>，&lt;code>my_second_job&lt;/code> 需要等待 &lt;code>my_second_job&lt;/code> 完成才能執行。&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>&lt;strong>step&lt;/strong>
每個 &lt;code>job&lt;/code> 下有多個 &lt;code>step&lt;/code>，每個 &lt;code>step&lt;/code> 主要有三個部分 ，
&lt;ul>
&lt;li>&lt;code>jobs.&amp;lt;job_id&amp;gt;.steps.name&lt;/code>: &lt;code>step&lt;/code> 名稱&lt;/li>
&lt;li>&lt;code>jobs.&amp;lt;job_id&amp;gt;.steps.run&lt;/code>: &lt;code>step&lt;/code>執行的指令或是 action&lt;/li>
&lt;li>&lt;code>jobs.&amp;lt;job_id&amp;gt;.steps.env&lt;/code>: &lt;code>step&lt;/code> 執行時的環境變數&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>綜合以上的基本結構，一個基本的 workflow YAML 結構如下：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">name&lt;/span>: Greet Everyone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">on&lt;/span>: push
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">jobs&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">my-job&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">name&lt;/span>: My Job
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">runs-on&lt;/span>: ubuntu-latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">steps&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Print a greeting
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">env&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">MY_VAR&lt;/span>: Hi there! My name is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">FIRST_NAME&lt;/span>: Mona
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">MIDDLE_NAME&lt;/span>: The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">LAST_NAME&lt;/span>: Octocat
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">run&lt;/span>: |&lt;span style="color:#f1fa8c">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 class="group " id="3-建立-workflow"
>3. 建立 Workflow&lt;a href="#3-%e5%bb%ba%e7%ab%8b-workflow"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h2>
&lt;p>在 GitHub Actions 的 Workflow 的設計上，我會趨向把持續整合（CI）及持續部署（CD）分為兩個獨立的 Workflow YAML 檔，在每次整合是都能先經過測試程序，在程式碼較為穩定的時候再部署至指定的伺服器。&lt;/p>
&lt;h3 class="group " id="31-持續整合ci-continuous-integration"
>3.1 持續整合（CI: Continuous Integration）&lt;a href="#31-%e6%8c%81%e7%ba%8c%e6%95%b4%e5%90%88ci-continuous-integration"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>軟體開發的過程中，測試是相當重要的一環。以目前軟體開發逐漸提高的複雜度，已經不容易使用傳統長時間的測試方式，需要更即時的測試。加上軟體開發大都以團隊協同合作進行，在彼此程式碼整合前需要先經過持續的測試。&lt;/p>
&lt;p>在 &lt;code>.github/workflows&lt;/code> 資料夾中建立 &lt;code>laravel-ci.yml&lt;/code> 內容如後。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">name&lt;/span>: Laravel 6 Continuous Integration
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">push&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">branches&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - master
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">jobs&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">laravel-tests&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">runs-on&lt;/span>: ubuntu-20.04
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">steps&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">uses&lt;/span>: actions/checkout@v2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Setup PHP version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">uses&lt;/span>: shivammathur/setup-php@v2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">with&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">php-version&lt;/span>: &lt;span style="color:#f1fa8c">&amp;#34;7.4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Copy ENV Laravel Configuration for CI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">run&lt;/span>: |&lt;span style="color:#f1fa8c">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> php -r &amp;#34;file_exists(&amp;#39;.env&amp;#39;) || copy(&amp;#39;.env.ci&amp;#39;, &amp;#39;.env&amp;#39;);&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Install Dependencies (PHP vendors)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">run&lt;/span>: composer install -q --no-ansi --no-interaction --no-scripts --no-suggest --no-progress --prefer-dist
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Generate key
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">run&lt;/span>: php artisan key:generate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Directory Permissions
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">run&lt;/span>: chmod -R 777 storage bootstrap/cache
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Create DB and schemas
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">run&lt;/span>: |&lt;span style="color:#f1fa8c">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> mkdir -p database
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> touch database/database.sqlite
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> php artisan migrate&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Run PHPCS Coding Standards
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">run&lt;/span>: |&lt;span style="color:#f1fa8c">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> vendor/bin/phpcs --colors&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Execute tests (Unit and Feature tests) via PHPUnit
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">env&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">DB_CONNECTION&lt;/span>: sqlite
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">DB_DATABASE&lt;/span>: database/database.sqlite
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">run&lt;/span>: vendor/bin/phpunit --testdox
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h3 class="group " id="32-持續部署cd-continuous-deployment"
>3.2 持續部署（CD: Continuous Deployment）&lt;a href="#32-%e6%8c%81%e7%ba%8c%e9%83%a8%e7%bd%b2cd-continuous-deployment"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h3>
&lt;p>在前段的說明中有提到在程式碼穩定之後再部署，「穩定」這裡我的定義會是在 PR 確認 merge 完成關閉時進行。主要是透過 SSH 的方式，連結至指定伺服器執行部署的腳本 (shell script)。&lt;/p>
&lt;h4 class="group " id="321-準備工作"
>3.2.1 準備工作：&lt;a href="#321-%e6%ba%96%e5%82%99%e5%b7%a5%e4%bd%9c"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h4>
&lt;ol>
&lt;li>
&lt;p>設定部署帳號
由於是使用 SSH 方式讓 GitHub Action 可以訪問我們的伺服器部署，在目標伺服器上開啟一個部署專用的帳號，限制帳號的權限不要太大提高安全性。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立伺服器登入憑證
在目標伺服器上產生使用 &lt;code>ssh-keygen&lt;/code> 指令產生公私鑰，將公鑰加入 &lt;code>authorized_keys&lt;/code>，私鑰加入 GitHub 的加密變數中，做為連線登入使用的憑證。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#8be9fd;font-style:italic">cd&lt;/span> ~/.ssh/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ ssh-keygen -f cicd-github
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ cat ~/.ssh/cicd-github.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改 sudoer 權限
因為我使用 &lt;code>nginx&lt;/code> 作為 Web Server，&lt;code>nginx&lt;/code> 本身無法處理 PHP 程式，需要透過 PHP-FPM (FastCGI Process Manager) 來解譯處理 ，部署的最後會需要重新 Reload PHP-FPM Service，&lt;code>systemctl reload&lt;/code> 為 root 才能執行的權限，修改 &lt;code>sudoer&lt;/code> 讓 &lt;code>cicd-github&lt;/code> 可以執行 PHP-FPM Service Reload。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ sudo visudo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cicd-github &lt;span style="color:#8be9fd;font-style:italic">ALL&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>NOPASSWD: /bin/systemctl reload php7.4-fpm.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>於 GitHub Actions 執行時無法於 sudo 過程中輸入密碼，在這裡設定為 &lt;code>NOPASSWD&lt;/code>，同時也限制帳號只能執行 reload 這個指令&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>GitHub 設定加密變數
GitHub Actions 執行的過程中，不會中斷執行等待輸入，因此設定加密變數 (Secrets) 讓 Actions 執行期間帶入需要的變數內容。
加入加密變數的方法：GitHub Repo &amp;ndash;&amp;gt; Settings &amp;ndash;&amp;gt; Secrets &amp;ndash;&amp;gt; New repository secret
主要需要的參數有 &lt;code>SSH_HOST&lt;/code>、&lt;code>SSH_USERNAME&lt;/code>、&lt;code>SSH_PRIVATE_KEY&lt;/code>&lt;/p>
&lt;ul>
&lt;li>SSH_HOST：伺服器位址&lt;/li>
&lt;li>SSH_USERNAME：登入伺服器的帳號名稱&lt;/li>
&lt;li>SSH_PRIVATE_KEY：登入的私鑰，由伺服器 &lt;code>cat ~/.ssh/cicd-github&lt;/code> 取得前面第2步驟的私鑰內容&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>若 SSH 使用的不是預設的 Port，可以增加 &lt;code>SSH_PORT&lt;/code> 變數存入 Port 號碼&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>新增 Personal access token
在部署腳本中主要使用 Git 的方式，來拉取程式碼至伺服器上，對於私人儲存庫 (private repositories) 執行期間將要求必須輸入 GitHub 帳號密碼，將會造成執行中斷。我們可以透過建立 GitHub &lt;strong>Personal access tokens&lt;/strong>，讓 Token 代表 GitHub Account 可以存取 GitHub API，同時也可以增加安全性，當懷疑 Token 外洩時，可以重新產生新的 Token 棄用舊的。
建立 Personal access token方法：&lt;a
class="link"
href="https://github.com/settings/tokens"target="_blank" rel="noopener">GitHub Personal access token&lt;/a
>
&amp;ndash;&amp;gt; Generate new token&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Git Clone Repository
在目標伺服器上，以部署用帳號 (cicd-github) 使用 https 方式 Clone Repository 至本地。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ git clone https://&amp;lt;Github Account&amp;gt;:&amp;lt;Personal access token&amp;gt;@github.com/&amp;lt;Repository&amp;gt;.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h4 class="group " id="322-伺服器部署腳本"
>3.2.2 伺服器部署腳本&lt;a href="#322-%e4%bc%ba%e6%9c%8d%e5%99%a8%e9%83%a8%e7%bd%b2%e8%85%b3%e6%9c%ac"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h4>
&lt;p>建立一個 Shell Script ，並將檔案名稱設定為 &lt;code>server_deploy.sh&lt;/code>，腳本內容如後。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">set&lt;/span> -e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> &lt;span style="color:#f1fa8c">&amp;#34;Deploying application ...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4"># Enter maintenance mode&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">(&lt;/span>php artisan down --message &lt;span style="color:#f1fa8c">&amp;#39;The app is being (quickly!) updated. Please try again in a minute.&amp;#39;&lt;/span>&lt;span style="color:#ff79c6">)&lt;/span> &lt;span style="color:#ff79c6">||&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># Update codebase&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git checkout deploy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git fetch origin deploy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git reset --hard origin/deploy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># Install dependencies based on lock file&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> composer install --no-interaction --prefer-dist --optimize-autoloader
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># Migrate database&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> php artisan migrate --force
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># Clear cache&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> php artisan cache:clear
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> php artisan route:clear
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> php artisan config:clear
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> php artisan view:clear
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># Update database classmap&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> composer dump-autoload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># Optimizing Configuration Loading&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> php artisan config:cache
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># Reload PHP to update opcache&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sudo systemctl reload php7.4-fpm.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4"># Exit maintenance mode&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>php artisan up
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> &lt;span style="color:#f1fa8c">&amp;#34;Application deployed!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>記得讓 &lt;code>server_deploy.sh&lt;/code> 檔案有執行權限才能部署。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ chmod u+x server_deploy.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h4 class="group " id="323-建立部署-github-action"
>3.2.3 建立部署 GitHub Action&lt;a href="#323-%e5%bb%ba%e7%ab%8b%e9%83%a8%e7%bd%b2-github-action"
>&lt;i class="eva eva-link ml-3 align-middle text-theme opacity-0 transition ease-in-out group-hover:opacity-100">&lt;/i>&lt;/a
>&lt;/h4>
&lt;p>在 &lt;code>.github/workflows&lt;/code> 資料夾中建立 &lt;code>laravel-cd.yml&lt;/code> 檔案。Deployment Action 在 GitHub deploy 分支 PR (pull request) 關閉時觸發，並在確認 &lt;code>merge&lt;/code> 後才執行部署。&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">name&lt;/span>: Continuous Deployment Laravel 6
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">pull_request&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">branches&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - deploy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">types&lt;/span>: [closed]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">jobs&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">laravel-deploy&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">runs-on&lt;/span>: ubuntu-20.04
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">if&lt;/span>: github.event.pull_request.merged == true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">steps&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Checkout
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">uses&lt;/span>: actions/checkout@v2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ff79c6">name&lt;/span>: Deployment
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">uses&lt;/span>: appleboy/ssh-action@master
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">with&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">host&lt;/span>: ${{ secrets.SSH_HOST }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">key&lt;/span>: ${{ secrets.SSH_PRIVATE_KEY }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">username&lt;/span>: ${{ secrets.SSH_USERNAME }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">script&lt;/span>: |&lt;span style="color:#f1fa8c">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> cd /var/www//html/repository-path
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c"> ./server_deploy.sh&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Note:
若需要 SSH Action 其他輸入參數可以參考 &lt;a
class="link"
href="https://github.com/appleboy/ssh-action"target="_blank" rel="noopener">SSH for GitHub Actions&lt;/a
>
&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;p>參考資料：&lt;/p>
&lt;ol>
&lt;li>&lt;a
class="link"
href="https://ibe.tw/getting-started-with-github-actions/"target="_blank" rel="noopener">GitHub Actions 基礎介紹&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html"target="_blank" rel="noopener">GitHub Actions 入门教程&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://www.twilio.com/blog/build-test-deploy-laravel-application-github-actions"target="_blank" rel="noopener">Build, Test, and Deploy Your Laravel Application With GitHub Actions&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://blog.logrocket.com/how-to-create-a-ci-cd-for-a-laravel-application-using-github-actions/"target="_blank" rel="noopener">How to create a CI/CD for a Laravel application using GitHub Actions&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="link"
href="https://laravel-news.com/push-deploy-with-github-actions"target="_blank" rel="noopener">Push deploy a Laravel app for free with GitHub Actions&lt;/a
>
&lt;/li>
&lt;/ol></description></item></channel></rss>